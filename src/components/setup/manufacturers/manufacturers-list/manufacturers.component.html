<div class="container">
  <h2 class="page-title">{{ 'MANUFACTURERS.TITLE' | translate }}</h2>

  <div class="card">
    <div class="form-section" >
      <h3 class="form-section-title">{{ isEditMode() ? ('MANUFACTURERS.EDIT_TITLE' | translate) : ('MANUFACTURERS.ADD_NEW' | translate) }}</h3>
      <form [formGroup]="manufacturerForm"  class="add-form-grid">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ 'MANUFACTURERS.NAME_LABEL' | translate }}</mat-label>
          <input
            matInput
            id="newManufacturerName"
            type="text"
            formControlName="name"
            placeholder="{{ 'MANUFACTURERS.NAME_PLACEHOLDER' | translate }}"
            name="manufacturerName"
            required
          />
        </mat-form-field>
     
      </form>
        <div class="form-actions">
          <button mat-raised-button color="primary" (click)="addManufacturer()" [disabled]="manufacturerForm.invalid" class="btn-mat-height">
            <mat-icon>{{ isEditMode() ? 'update' : 'save' }}</mat-icon>
            {{ isEditMode() ? ('MANUFACTURERS.UPDATE_BUTTON' | translate) : ('MANUFACTURERS.ADD_BUTTON' | translate) }}
          </button>
          @if (isEditMode()) {
            <button mat-stroked-button (click)="cancelEdit()" class="btn-mat-height">
              <mat-icon>cancel</mat-icon>
              {{ 'MANUFACTURERS.CANCEL_BUTTON' | translate }}
            </button>
          }
        </div>
    </div>

    <h3 class="card-header">{{ 'MANUFACTURERS.LIST_TITLE' | translate }}</h3>
    
    @if (filteredAndSortedManufacturers().length === 0) {
      <div class="empty-state">
        {{ 'MANUFACTURERS.NO_MANUFACTURERS' | translate }}
      </div>
    } @else {
      <div class="manufacturers-grid">
        @for (manufacturer of filteredAndSortedManufacturers(); track manufacturer.id) {
          <div class="manufacturer-card">
            <div class="manufacturer-card-content">
              <h4 class="manufacturer-name">{{ manufacturer.name }}</h4>
            </div>
            <div class="manufacturer-card-actions">
              <button
                type="button"
                class="btn-icon-primary"
                (click)="editManufacturer(manufacturer)"
                [title]="'MANUFACTURERS.EDIT' | translate">
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                </svg>
              </button>
              <button
                type="button"
                class="btn-icon-danger"
                (click)="doDelete(manufacturer.id)"
                [title]="'MANUFACTURERS.DELETE' | translate">
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6"/>
                </svg>
              </button>
            </div>
          </div>
        }
      </div>
    }
  </div>

  <app-modal
    [isOpen]="isDeleteModalOpen()"
    title="{{ 'MANUFACTURERS.DELETE_CONFIRM_TITLE' | translate }}"
    message="{{ 'MANUFACTURERS.DELETE_CONFIRM_MESSAGE' | translate }}"
    (confirm)="confirmDelete()"
    (cancel)="closeDeleteModal()"
  ></app-modal>
</div>
