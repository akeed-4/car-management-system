<div class="container">
  <div class="page-header">
    <h2>{{ 'CUSTOMERS.LIST_TITLE' | translate }}</h2>
    <a routerLink="/entities/customers/new" class="btn btn-primary">
      <mat-icon>add</mat-icon>
      <span>{{ 'CUSTOMERS.ADD_NEW' | translate }}</span>
    </a>
  </div>

  <div class="card">
    <dx-data-grid
      #customersGrid
      [dataSource]="customers"
      [showBorders]="true"
      [showRowLines]="true"
      [showColumnLines]="true"
      [rowAlternationEnabled]="true"
      [allowColumnReordering]="true"
      [allowColumnResizing]="true"
      [columnAutoWidth]="true"
      [wordWrapEnabled]="true"
      [rtlEnabled]="true"
      [hoverStateEnabled]="true"
     >

      <dxo-load-panel [enabled]="true"></dxo-load-panel>
      <dxo-scrolling mode="virtual"></dxo-scrolling>

      <dxi-column
        dataField="name"
        [caption]="'CUSTOMERS.COLUMNS.NAME' | translate"
        [allowFiltering]="true"
        [allowSorting]="true"
        [allowGrouping]="true">
      </dxi-column>

      <dxi-column
        dataField="nationalId"
        [caption]="'CUSTOMERS.COLUMNS.NATIONAL_ID' | translate"
        [allowFiltering]="true"
        [allowSorting]="true"
        [allowGrouping]="false"
        [width]="150">
      </dxi-column>

      <dxi-column
        dataField="phone"
        [caption]="'CUSTOMERS.COLUMNS.PHONE' | translate"
        [allowFiltering]="true"
        [allowSorting]="true"
        [allowGrouping]="false"
        [width]="140">
      </dxi-column>

      <dxi-column
        dataField="phone2"
        [caption]="'CUSTOMERS.COLUMNS.SECONDARY_PHONE' | translate"
        [allowFiltering]="true"
        [allowSorting]="false"
        [allowGrouping]="false"
        [width]="140"
        [visible]="false">
      </dxi-column>

      <dxi-column
        dataField="email"
        [caption]="'CUSTOMERS.COLUMNS.EMAIL' | translate"
        [allowFiltering]="true"
        [allowSorting]="false"
        [allowGrouping]="false"
        [visible]="false">
      </dxi-column>

      <dxi-column
        dataField="address"
        [caption]="'CUSTOMERS.COLUMNS.ADDRESS' | translate"
        [allowFiltering]="true"
        [allowSorting]="false"
        [allowGrouping]="true"
        [width]="200">
      </dxi-column>

      <dxi-column
        dataField="city"
        [caption]="'CUSTOMERS.COLUMNS.CITY' | translate"
        [allowFiltering]="true"
        [allowSorting]="true"
        [allowGrouping]="true"
        [visible]="false">
      </dxi-column>

      <dxi-column
        dataField="occupation"
        [caption]="'CUSTOMERS.COLUMNS.OCCUPATION' | translate"
        [allowFiltering]="true"
        [allowSorting]="true"
        [allowGrouping]="true"
        [visible]="false">
      </dxi-column>

      <dxi-column
        dataField="monthlyIncome"
        [caption]="'CUSTOMERS.COLUMNS.MONTHLY_INCOME' | translate"
        [allowFiltering]="true"
        [allowSorting]="true"
        [allowGrouping]="false"
        [dataType]="'number'"
        [format]="'currency'"
        [visible]="false">
      </dxi-column>

      <dxi-column
        dataField="creditScore"
        [caption]="'CUSTOMERS.COLUMNS.CREDIT_SCORE' | translate"
        [allowFiltering]="true"
        [allowSorting]="true"
        [allowGrouping]="false"
        [dataType]="'number'"
        [visible]="false">
      </dxi-column>

      <dxi-column
        dataField="isActive"
        [caption]="'CUSTOMERS.COLUMNS.STATUS' | translate"
        [allowFiltering]="true"
        [allowSorting]="true"
        [allowGrouping]="true"
        [dataType]="'boolean'"
        [trueText]="'CUSTOMERS.STATUS.ACTIVE' | translate"
        [falseText]="'CUSTOMERS.STATUS.INACTIVE' | translate"
        [width]="100">
      </dxi-column>

      <dxi-column
        type="buttons"
        [width]="120"
        [caption]="'CUSTOMERS.COLUMNS.ACTIONS' | translate">
        <dxi-button
          name="edit"
          [hint]="'CUSTOMERS.ACTIONS.EDIT' | translate"
          [icon]="'edit'"
          [onClick]="editCustomer">
        </dxi-button>
        <dxi-button
          name="delete"
          [hint]="'CUSTOMERS.ACTIONS.DELETE' | translate"
          [icon]="'trash'"
          [cssClass]="'btn-danger'"
          [onClick]="requestDelete">
        </dxi-button>
      </dxi-column>

    </dx-data-grid>
  </div>
</div>

<app-modal
  [isOpen]="isDeleteModalOpen()"
  [title]="'CUSTOMERS.DELETE_MODAL.TITLE' | translate"
  [message]="'CUSTOMERS.DELETE_MODAL.MESSAGE' | translate"
  (confirm)="confirmDelete()"
  (cancel)="closeDeleteModal()">
</app-modal>
