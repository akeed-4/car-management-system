<div class="container">
  <h2 class="page-title">{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.TITLE') }}</h2>

  <!-- Summary Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <p class="stat-label">{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.TOTAL_FINANCED') }}</p>
      <p class="stat-value">{{ totalFinancedValue() | currency:'SAR':'symbol':'1.0-0' }}</p>
    </div>
    <div class="stat-card">
      <p class="stat-label">{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.TOTAL_ACCRUED_COST') }}</p>
      <p class="stat-value stat-warning">{{ totalAccruedCost() | currency:'SAR':'symbol':'1.0-0' }}</p>
    </div>
  </div>

  <!-- Detailed Report Table -->
  <div class="card">
     <h3 class="card-title">{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.DETAILS_TITLE') }}</h3>
     <div class="table-wrapper">
      <table class="table">
        <thead>
          <tr>
            <th>{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.CAR') }}</th>
            <th>{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.PURCHASE_PRICE') }}</th>
            <th>{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.PURCHASE_DATE') }}</th>
            <th>{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.PLAN') }}</th>
            <th class="text-center">{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.DAYS_IN_STOCK') }}</th>
            <th>{{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.ACCRUED_COST') }}</th>
          </tr>
        </thead>
        <tbody>
          @for (item of financedCarsReport(); track item.carId) {
            <tr>
              <td>{{ item.carDescription }}</td>
              <td class="font-mono">{{ item.purchasePrice | currency:'SAR' }}</td>
              <td>{{ item.purchaseDate | date:'yyyy-MM-dd' }}</td>
              <td>{{ item.planName }} ({{ item.financier }})</td>
              <td class="text-center days-badge" [class.days-warning]="item.daysInStock > 60">{{ item.daysInStock }}</td>
              <td class="font-mono cost-value">{{ item.accruedCost | currency:'SAR' }}</td>
            </tr>
          } @empty {
            <tr>
              <td colspan="6" class="empty-state">
                {{ translate.instant('ACCOUNTS.FLOOR_PLAN_REPORT.NO_FINANCED_CARS') }}
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
