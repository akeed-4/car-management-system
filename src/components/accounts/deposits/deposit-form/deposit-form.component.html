
<div class="container">
  <div class="page-header">
    <h2>{{ 'ACCOUNTS.DEPOSITS.FORM.TITLE' | translate }}</h2>
    <a routerLink="/accounts/deposits" class="back-link">
      <svg class="icon" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 9l-3 3m0 0l3 3m-3-3h7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>
      <span>{{ 'ACCOUNTS.DEPOSITS.FORM.BACK' | translate }}</span>
    </a>
  </div>

  <div class="card">
    <form #depositForm="ngForm" (ngSubmit)="saveDeposit()">
      
      <section class="form-section">
        <h3 class="form-section-title">{{ 'ACCOUNTS.DEPOSITS.FORM.TITLE' | translate }}</h3>
        <div class="form-grid cols-3">
          <div>
            <label class="form-label">{{ 'ACCOUNTS.DEPOSITS.FORM.VOUCHER_NUMBER' | translate }}</label>
            <input type="text" [value]="voucherNumber()" disabled class="form-input" readonly>
          </div>
          <div>
            <label for="date" class="form-label">{{ 'ACCOUNTS.DEPOSITS.FORM.DATE' | translate }}</label>
            <input type="date" id="date" name="date" [ngModel]="date()" (ngModelChange)="date.set($event)" required class="form-input">
          </div>
          <div>
            <label for="customer" class="form-label">{{ 'ACCOUNTS.DEPOSITS.FORM.CUSTOMER' | translate }}</label>
            <select id="customer" name="customer" [ngModel]="selectedCustomerId()" (ngModelChange)="selectedCustomerId.set(+$event)" required class="form-select">
              <option [ngValue]="null" disabled>{{ 'ACCOUNTS.DEPOSITS.FORM.SELECT_CUSTOMER' | translate }}</option>
              @for(customer of customers(); track customer.id) {
                <option [value]="customer.id">{{ customer.name }}</option>
              }
            </select>
          </div>
          <div>
            <label for="car" class="form-label">{{ 'ACCOUNTS.DEPOSITS.FORM.CAR' | translate }}</label>
            <select id="car" name="car" [ngModel]="selectedCarId()" (ngModelChange)="onCarChange(+$event)" required class="form-select">
              <option [ngValue]="null" disabled>{{ 'ACCOUNTS.DEPOSITS.FORM.SELECT_CAR' | translate }}</option>
              @for(car of availableReservedCars(); track car.id) {
                <option [value]="car.id">{{ car.make }} {{ car.model }} ({{ car.year }}) - {{car.vin}}</option>
              }
            </select>
          </div>
          <div>
            <label for="amount" class="form-label">{{ 'ACCOUNTS.DEPOSITS.FORM.AMOUNT' | translate }}</label>
            <input type="number" id="amount" name="amount" [ngModel]="amount()" (ngModelChange)="amount.set(+$event)" required min="0.01" class="form-input">
          </div>
        </div>
      </section>

      <section class="form-section">
        <label for="notes" class="form-label">{{ 'ACCOUNTS.DEPOSITS.FORM.NOTES_PLACEHOLDER' | translate }}</label>
        <textarea id="notes" name="notes" rows="3" [ngModel]="notes()" (ngModelChange)="notes.set($event)" placeholder="{{ 'ACCOUNTS.DEPOSITS.FORM.NOTES_PLACEHOLDER' | translate }}" class="form-input"></textarea>
      </section>

      <div class="form-actions">
        <a routerLink="/accounts/deposits" class="btn btn-light">{{ 'ACCOUNTS.DEPOSITS.FORM.CANCEL' | translate }}</a>
        <button type="submit" [disabled]="depositForm.invalid || amount() <= 0" class="btn btn-primary">
          {{ 'ACCOUNTS.DEPOSITS.FORM.SAVE' | translate }}
        </button>
      </div>
    </form>
  </div>
</div>
